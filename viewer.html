  const geo = new ol.format.GeoJSON().writeFeatures(vectorLayer.getSo>    featureProjection:'EPSG:3857',
    dataProjection:'EPSG:4326'
  });
  localStorage.setItem('lastGeoJSON', geo);
  dataChanged = false;
});

// Load data terakhir dari localStorage saat halaman dibuka
window.addEventListener('load', () => {
  const saved = localStorage.getItem('lastGeoJSON');
  if (saved) {
    try {
      geojsonData = JSON.parse(saved);
      renderLayer();
      pushNote({ title:'Data dipulihkan', body:'Memuat data terakhir >    } catch(e) {
      console.warn('Gagal memuat data tersimpan', e);
    }
  }
});

// Peringatan sebelum reload/close jika ada perubahan
window.addEventListener('beforeunload', function (e) {
  if (dataChanged) {
    e.preventDefault();
    e.returnValue = 'Perubahan belum diexport. Simpan sebagai file ya>  }
});
</script>
</body>
</html>
